<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Novella App - Main</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preload" href="/fonts/UniSans.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/fonts/MaiandraGD.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/fonts/Unispace.woff2" as="font" type="font/woff2" crossorigin="anonymous">
</head>
<body data-user-id="<%= userId %>">
    <div class="main-page">
        <header>
            <button class="freedurov-button" onclick="window.open('https://www.change.org/p/free-pavel-durov-freedurov?source_location=tag_')">
                #FREEDUROV
            </button>
        </header>
        <div class="token-section">
            <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1725622251/Novellacoin.png" alt="Token Icon" class="token-icon">
            <p id="token-balance" class="token-balance">0</p>
        </div>
		
		<!-- Daily Reward - Ежедневный вход и бонусы -->
		<div class="daily-reward-container">
			<p class="daily-reward-title">DAILY REWARDS</p>
			<button id="claim-reward-button" class="daily-reward-button" onclick="claimReward()">Daily Check in +100 $Novella</button>
			<div class="timer-container">
				<img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1726574752/Element/Timer.png" alt="Timer" class="timer-icon">
				<span id="timer" class="timer">24:00:00</span>
			</div>
		</div>
    
        <!-- Нижнее меню -->
        <nav class="bottom-menu">
            <a href="index.html" class="menu-item active">
                <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1726420961/Menu/Button%20version%202/Main_iconmenu.png" alt="Main">
                <span>Main</span>
            </a>
            <a href="task.html" class="menu-item">
                <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1726420961/Menu/Button%20version%202/Task_iconmenu.png" alt="Task">
                <span>Task</span>
            </a>
            <a href="wallet.html" class="menu-item">
                <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1726420961/Menu/Button%20version%202/Wallet_iconmenu.png" alt="Wallet">
                <span>Wallet</span>
            </a>
            <a href="airdrop.html" class="menu-item">
                <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1726420961/Menu/Button%20version%202/Airdrop_iconmenu.png" alt="Airdrop">
                <span>Airdrop</span>
            </a>
            <a href="leaders.html" class="menu-item">
                <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1726420961/Menu/Button%20version%202/Leaders_iconmenu.png" alt="Leaders">
                <span>Leaders</span>
            </a>
        </nav>
    </div>
	<script>
		const updateTokenBalance = () => {
			const userId = document.body.dataset.userId;

			if (!userId) {
				console.error('User ID is not defined.');
				return; // Завершите выполнение, если userId не найден
			}

			fetch(`/get-tokens/${userId}`)
				.then(response => {
					if (!response.ok) {
						throw new Error('Network response was not ok');
					}
					return response.json();
				})
				.then(data => {
					if (data.tokens !== undefined) {
						document.getElementById('token-balance').innerText = data.tokens;
					}
				})
				.catch(error => {
					console.error('Ошибка при обновлении баланса токенов:', error);
				});
		};

		// Обновление баланса каждые 15 секунд
		setInterval(updateTokenBalance, 15000);
		// Начальное обновление при загрузке
		updateTokenBalance();
		
		<!-- Подключение скрипта dailyreward.js -->
		<script src="dailyreward.js"></script>
<body>
</html>
