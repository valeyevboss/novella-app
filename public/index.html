<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novella App - Main</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preload" href="/fonts/UniSans.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/fonts/MaiandraGD.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/fonts/Unispace.woff2" as="font" type="font/woff2" crossorigin="anonymous">
</head>
<body>
    <div class="main-page">
        <header>
            <button class="freedurov-button" onclick="window.open('https://www.change.org/p/free-pavel-durov-freedurov?source_location=tag_')">
                #FREEDUROV
            </button>
        </header>

		<div class="token-section">
			<img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1725622251/Novellacoin.png" alt="Token Icon" class="token-icon">
			<p id="token-balance" class="token-balance">0</p> <!-- Изменено с <p class="token-balance">0</p> -->
		</div>
    </div>
    <nav class="bottom-menu">
        <a href="index.html" class="menu-item active">
            <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1725622251/main_icon.png" alt="Main">
            <span>Main</span>
        </a>
        <a href="task.html" class="menu-item">
            <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1725622251/task_icon.png" alt="Task">
            <span>Task</span>
        </a>
        <a href="wallet.html" class="menu-item">
            <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1725622251/wallet_icon.png" alt="Wallet">
            <span>Wallet</span>
        </a>
        <a href="airdrop.html" class="menu-item">
            <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1725622250/airdrop_icon.png" alt="Airdrop">
            <span>Airdrop</span>
        </a>
        <a href="leaders.html" class="menu-item">
            <img src="https://res.cloudinary.com/dvjohgg6j/image/upload/v1725623705/leaderboard_icon.png" alt="Leaders">
            <span>Leaders</span>
        </a>
    </nav>
	
	<script>
		// Функция для получения токенов пользователя
		async function fetchTokens() {
			try {
				const response = await fetch('/tokens');
				const data = await response.json();
				document.getElementById('token-balance').textContent = data.tokens;
			} catch (error) {
				console.error('Ошибка загрузки токенов:', error);
			}
		}

		// Загрузить токены при загрузке страницы
		window.onload = fetchTokens;
	</script>
	
	<script>
	// Пример функции для проверки статуса пользователя
	async function checkUserStatus() {
		try {
			// Получаем ID пользователя из какого-то источника, например, из куки или локального хранилища
			const telegramId = getTelegramId(); // Реализуйте эту функцию в зависимости от вашей логики
			const response = await fetch(`/check-status?telegramId=${telegramId}`);
			const data = await response.json();

			if (data.status === 'banned') {
				window.location.href = '/banned'; // Перенаправление на страницу бана
			}
		} catch (error) {
			console.error('Ошибка проверки статуса:', error);
		}
	}

	// Вызываем функцию при загрузке страницы
	window.onload = checkUserStatus;


    // Вызов функции при загрузке страницы
    document.addEventListener('DOMContentLoaded', checkUserStatus);
</script>

</body>
</html>
